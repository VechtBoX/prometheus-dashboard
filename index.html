<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prometheus Dashboard ðŸ¦…</title>
  <script src="https://cdn.jsdelivr.net/npm/redis@4.6.5/dist/redis.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e); color: white; font-family: 'Courier New', monospace; }
    .card { transition: all 0.5s ease; }
    .card:hover { transform: scale(1.1) rotate(2deg); box-shadow: 0 0 40px #a78bfa; border-color: #e879f9; }
    .stat-card { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); }
  </style>
</head>
<body class="min-h-screen p-8">
  <h1 class="text-6xl font-extrabold text-center mb-12 bg-gradient-to-r from-cyan-400 to-purple-600 bg-clip-text text-transparent">
    Prometheus Dashboard ðŸ¦…
  </h1>

  <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-16">
    <div class="stat-card p-8 rounded-3xl border-4 border-cyan-500 text-center">
      <h2 class="text-3xl font-bold text-cyan-400">Total Revenue</h2>
      <p class="text-5xl mt-4" id="totalRevenue">â‚¬0</p>
    </div>
    <div class="stat-card p-8 rounded-3xl border-4 border-purple-500 text-center">
      <h2 class="text-3xl font-bold text-purple-400">Current XRP</h2>
      <p class="text-5xl mt-4" id="currentXrp">1010</p>
    </div>
    <div class="stat-card p-8 rounded-3xl border-4 border-pink-500 text-center">
      <h2 class="text-3xl font-bold text-pink-400">Running Bots</h2>
      <p class="text-5xl mt-4" id="runningBots">0</p>
    </div>
    <div class="stat-card p-8 rounded-3xl border-4 border-yellow-500 text-center">
      <h2 class="text-3xl font-bold text-yellow-400">Uptime</h2>
      <p class="text-5xl mt-4">98.7%</p>
    </div>
  </div>

  <h2 class="text-4xl font-bold text-center mb-12 text-yellow-400">Top Bots & Live Agents</h2>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-12 max-w-8xl mx-auto" id="agents"></div>

  <script>
    const client = redis.createClient({ url: 'redis://127.0.0.1:6379' });
    client.connect().then(() => console.log('Verbonden met Redis!'));

    const agentsDiv = document.getElementById('agents');
    let totalRevenue = 0;
    let runningBots = 0;

    client.subscribe('agents:status', (message) => {
      const status = JSON.parse(message);
      runningBots++;

      let card = document.getElementById(status.agentId);
      if (!card) {
        card = document.createElement('div');
        card.id = status.agentId;
        card.className = 'card bg-gradient-to-b from-purple-900 to-black p-10 rounded-3xl shadow-2xl border-4 border-purple-600';
        agentsDiv.prepend(card);
      }

      totalRevenue += (status.progress?.revenueGenerated || 0);

      card.innerHTML = `
        <h2 class="text-4xl font-bold mb-6 text-yellow-400">${status.name || status.agentId}</h2>
        <p class="text-2xl mb-4">Status: <span class="text-green-400">${status.status}</span></p>
        <p class="text-2xl mb-4">Task: ${status.currentTask || 'Idle'}</p>
        <p class="text-2xl mb-4">Platform: ${status.platform || 'Unknown'}</p>
        <p class="text-2xl mb-4">Tasks: ${status.progress?.tasksCompleted || 0}</p>
        <p class="text-3xl text-yellow-300">Revenue: â‚¬${status.progress?.revenueGenerated || 0}</p>
        <p class="text-lg mt-6 opacity-80">Machine: ${status.machine}</p>
      `;

      document.getElementById('totalRevenue').innerText = `â‚¬${totalRevenue.toFixed(2)}`;
      document.getElementById('runningBots').innerText = runningBots;
    });
  </script>
</body>
</html>
